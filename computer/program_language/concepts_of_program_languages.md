# 《程序设计语言原理》读书笔记

## 语言评估标准
程序设计语言的最重要的评估标准有4个：可读性、可写性、可靠性与代码。此外，还有通用性（在广泛范围内可应用的程度）及定义良好性（程序设计语言官方定义文档的完整性及准确程度）等评估标准。

### 语言的评估标准和影响这些评估标准的语言特征

语言特征            | 可读性 | 可写性 | 可靠性
------------------- | ------ | ------ | ------
简单性              |   *    |   *    |   *
正交性              |   *    |   *    |   *
控制结构            |   *    |   *    |   *
数据类型与数据结构  |   *    |   *    |   *
语法设计            |   *    |   *    |   *
支持抽象            |        |   *    |   *
表达性              |        |   *    |   *
类型检测            |        |        |   *
异常处理            |        |        |   *
别名使用            |        |        |   *

### 可读性

#### 简单性对可读性的影响

* 一种语言的整体简单性极大地影响着它的可读性，一种具有大量基本结构的语言较只有少量基本结构的语言要难学得多。

* 特性的多样化、运算符重载可能会降低程序的可读性。

* 过分追求语言的简单性也不妥。汇编语言缺乏较为复杂的控制语句，导致清晰性不佳；而且由于其语句简单，编写类似功能的程序，往往需要使用比高级语言多得多的语句。

#### 正交性对可读性的影响

* 程序设计语言的正交性指的是，使用该语言中相对少量的基本结构，经过相对少的组合步骤，可以构成该语言的控制结构与数据结构。

* 正交性的意义是独立于它在程序中出现的上下文的。语言的正交性来自于它的基本结构的对称关系。缺乏正交性会导致语言规则的异常。正交性越好，异常规则就会越少，因而较容易被人们学习、阅读和理解。

* 过分追求正交性也会有问题。高度正交性会导致过量的各种结合，导致不必要的复杂性。

* 部分人认为，函数式语言是简单性与正交性的有机结合。

#### 控制结构对可读性的影响

* 缺乏控制语句导致很差的可读性。能够从头到尾顺序读完的程序，比需要读者从一条语句跳跃到另一条语句来跟踪程序的执行顺序要好读得多。

#### 数据类型与数据结构对可读性的影响

* 用布尔数据类型比用数值数据类型来表示标志，其可读性更好；用结构体比用一组相似数组来记录员工档案，其可读性更好。

#### 语法设计对可读性的影响

* 将标识符的长度限制得很短会降低语言的可读性。

* 语言中特殊字的形式将极大地影响程序的外观及与此相关联的程序的可读性。如Ada使用end if来终止选择结构、使用end loop来终止循环结构，而C语言统一使用大括号}。前者可读性更好，但导致更多的保留字。

* 设计程序语言中的语句时，使其字面形式至少部分第表明它们的功用，有助于增强可读性。人们对Unix shell的不满之一，是它们的形式并非总是提示它们的功能，比如新手接触grep时很难联系到g/regular\_expression/g的含义。

### 可写性

#### 简单性与正交性对可写性的影响

* 一组较少量的基本结构以及一套相互一致的组合规则，能提高可写性。因为程序员只需学习一套简单的基本结构，就能针对复杂问题设计出解决方法。

* 过分的正交性有损于可写性。因为当基本结构的任意组合几乎都合法时，就很难检查出程序中的错误。

#### 支持抽象对可写性的影响

* 抽象指的是通过合理省略许多细节的方式，来定义并使用复杂结构或复杂运算的能力。

* 程序设计语言可以支持两种不同类型的抽象：过程抽象与数据抽象。

* 过程抽象举例：采用子程序来实现程序中的重复语句，这样明显方便编写。

* 数据抽象举例：使用类来表示二叉树节点结构，表达自然，方便编写。

#### 表达性对可写性的影响

* 表达性值一种程序设计语言具有相对方便、非繁琐的方式来说明运算。比如`count++`比`count=count+1`更方便简洁。

### 可靠性

#### 类型检测对可靠性的影响

* 编译时的类型检测要比运行时的类型检测更为理想。因为运行时的类型检测是高代价的。程序中的错误发现得越早，改正错误的代码就越低。

#### 异常处理对可靠性的影响

* 异常处理一般指中断运行时错误（以及所发现的其他非正常情况）并改正错误然后继续运行的能力。异常处理显然有助于提高程序的可靠性。

#### 使用别名对可靠性的影响

* 使用别名指的是用两个以上的名字来访问同一个存储单元。使用别名是程序设计语言中的一个危险特性。程序员必须时刻记住，如果多个指针指向同一个对象，改变一个指针所指向的值，其他指针所指向的值也会随之改变。

#### 可读性与可写性对可靠性的影响

* 一个程序越容易编写，则其正确的可能性越大。

* 在软件生命周期的编写与维护阶段，程序的可读性都会影响其可读性。

### 代价

影响程序设计语言代价的三个重要因素是程序开发、软件维护及可靠性。

* 训练程序员使用这种语言的代价，取决于语言的简单性与正交性。

* 使用这种语言来编写程序的代价，取决于语言的可写性，也部分取决于这种语言的设计目的与特定应用问题的接近程度。

* 在这种语言中编译程序的代价，取决于其编译器。注意：编译器产生采用优化技术可以减少产生代码的规模及提高代码的执行速度但会导致编译时间增长。

* 程序运行的代价，取决于执行效率。要求进行大量运行时类型检测的语言必将阻碍代码的高速执行。

* 语言实现系统的代价。Java能够快速被人们接受的原因之一，是该语言有免费的编译器/解释器系统。

* 可靠性差的代价。造成经济损失甚至更严重的后果。

* 程序维护的代价，主要取决于语言的可读性。


## 影响语言设计的因素

影响语言设计的因素中，最为重要的是计算机体系结构及程序设计方法学。

### 计算机体系结构

#### 冯·诺依曼体系与命令式语言

* 冯·诺依曼体系是指：数据与程序都被存储于同一存储器，执行指令的中央处理器（CPU）与存储器是分开的。因此，指令和数据必须从存储器传输到CPU，而CPU运行的结果又必须传回存储器。

* 由于冯·诺依曼体系结构，命令式语言的核心特形成有：模拟存储单元的变量、基于传输操作的赋值语句，以及迭代形式的循环运算。

#### 非冯·诺依曼体系与函数式语言

* 函数式语言进行计算的主要方式是将函数作用于给定参数之上，在函数式语言中的程序设计可以没有变量、没有赋值语句以及没有循环。

* 在一种能够允许函数式语言程序高效率运行的、非冯·诺依曼体系结构的计算机出现之前，函数式语言是不可能替代命令式语言的。

* 在过去25年间产生的并行体系结构计算机，有望加快函数式程序的执行速度，但其速度仍然不足以与命令式程序的执行速度相比。

### 程序设计方法学

* 20世纪60年代末至70年代初期，人们开始深入分析软件开发的过程及程序设计语言的设计问题，其中一个重要原因是：随着硬件成本的降低及软件费用的增加，计算机的主要代价从硬件转向软件。

* 20世纪70年代产生的新的软件开发方法学被称为自顶向下设计、逐步求精。当时发现程序设计语言的主要缺点是不完全的类型检测，以及不适宜的控制语句（需要运用太多的goto语句）。

* 20世纪70年代后期，开始了从面向过程转移到面向数据的程序设计方法学。在面向数据的软件开发的演进中，最后一步是20世纪80年代初期的面向对象的程序设计。

## 语言分类

程序设计语言通常可以分为四类：命令式语言、函数式语言、逻辑语言以及面向对象语言。

## 语言设计中的权衡

### 可靠性与执行代价的权衡

Java语言要求索引数组元素时必须检查下标，C语言则不作要求，这导致C语言的执行速度比语义上相同的Java程序要快得多，但Java程序则更为可靠。

### 可读性与可写性的权衡

APL语言具有一整套功能强大、用于数组操作数的运算符，对于那些具有多个数组运算的应用，APL语言的可写性很高，但可读性极差。著名作者Daniel McCracken曾经写道，他花费了四个小时来阅读和理解一个仅有四行的APL程序。

### 可写性与可靠性的权衡

C++中的指针可以以各种不同的方式来操作，导致数据寻址极为灵活，但带来指针所具有的潜在可靠性问题。

## 实现方法


