#《设计模式的艺术》第4章学习笔记

## 第4章 集中式工厂的实现——简单工厂模式

1. 简单工厂模式的定义：定义一个工厂类，它可以根据参数的不同返回不同类的实例，被创建的实例通常都具有共同的父类。

2. 由于在简单工厂模式中用于创建实例的方法是静态方法，因此简单工厂模式又被称为静态工厂方法（Static Factory Method）模式。

3. 为避免更换具体对象时修改客户端代码，可以将静态工厂方法的参数存储在xml或properties格式的配置文件中，在通过一个工具类XMLUtil来读取配置文件中的字符串参数。

4. 与一个对象相关的职责通常有3类
    - 对象本身所具有的职责
    - 创建对象的职责
    - 使用对象的职责

5. Java语言中通常有以下几种创建对象的方式
    - 使用new关键字直接创建对象
    - 通过反射机制创建对象
    - 通过clone()方法创建对象
    - 通过工厂类创建对象

6. 所有的工厂模式都强调一点：两个类A和B之间的关系应该仅仅是A创建B或者A使用B，而不能两种关系都有。将对象的创建和使用分离，好处是：
    - 使系统更符合单一职责原则，有利于对功能的复用和系统的维护
    - 将有关创建的知识搬移到一个工厂类中，防止用来实例化一个类的数据和代码散落在在多个类中，从而避免代码重复、创建蔓延等问题

7. 有时候，为了简化简单工厂模式，可以将抽象产品类和工厂类合并，将静态工厂方法移至抽象产品类中。

8. 主要优点
    - 工厂类包含必要的判断逻辑，可以决定在什么时候创建哪一个产品类的实例，客户端可以免除直接创建产品对象的职责，而仅仅“消费”产品
    - 客户端无需知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，一定程度上减少使用者的记忆量
    - 通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性

9. 主要缺点
    - 由于工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统都要收到影响
    - 引入了新的工厂类，增加系统中类的个数，增加系统的复杂度和理解难度
    - 系统扩展困难，一旦添加新产品就不得不修改工厂逻辑，在产品类型较多时，有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护
    - 由于使用了静态工厂方法，造成工厂角色无法形成基于继承的等级结构

9. 适用场景
    - 工厂类负责创建的对象比较少
    - 客户端只知道传入工厂类的参数，对于如何创建对象并不关心
