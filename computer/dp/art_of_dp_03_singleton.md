# 《设计模式的艺术》第3章学习笔记

## 创建型模式（Creational Pattern）

1. 创建型模式将对象的创建和使用分离，在使用对象时无需关心对象的创建细节，从而降低系统的耦合度，让设计方案更易于修改和扩展。

2. 每一个创建型模式都通过采用不同的解决方案来回答3个问题：创建什么（What）、由谁创建（Who）和何时创建（When）。

## 第3章 确保对象的唯一性——单例模式

1. Windows系统始终只能弹出一个任务管理器窗口，主要原因在于节约系统资源。

2. Windows任务管理器的实现方法
    - 为禁止类的外部直接使用new来创建对象，将TaskManager的构造函数的访问权限改为private
    - 为禁止类的内部多次创建对象，在TaskManager中定义一个静态的TaskManager类型的私有成员变量
    - 为向外界提供访问途径，增加一个公有的静态方法，返回静态私有成员变量

3. 单例模式的定义：确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。这个类称为单例类，它提供全局访问的方法。

4. 饿汉式单例类
    - 在定义静态变量时实例化单例类，因此在类加载时就已经创建了单例对象
    - 优点在于无需考虑多线程访问问题，可以确保实例的唯一性
    - 缺点是资源利用效率低，因为不管需不需要使用该单例对象，在类加载时该对象就需要创建，此外加载时间可能会比较长

5. 懒汉式单例类
    - 延迟加载技术，即需要的时候再加载实例
    - 双重检查锁定（Double-Check Locking）

6. 静态内部类（适用于Java）
    - Initialization on Demand Hoader(IoDH)
    - 在单例类中增加一个静态内部类，在该内部类中创建单例对象，再将该单例对象通过getInstance()方法返回给外部使用
    - 与编程语言本身的特性相关，很多面向对象语言不支持IoDH

7. 主要优点
    - 提供了对唯一实例的受控访问
    - 节约系统资源
    - 允许可变数目的实例（基于单例模式进行扩展后）

8. 主要缺点
    - 由于单例模式中没有抽象层，因此扩展比较困难（疑问：也可以有抽象层吧？）
    - 职责过程，即提供了业务方法，又提供了创建对象的方法，一定程度上违背了单一职责的原则
    - 现在很多面向对象编程语言的运行环境都提供了自动垃圾回收技术，如果实例化的共享对象长时间不被利用，系统会认为它是垃圾而自动销毁并回收资源，下次利用时将重新实例化，这将导致共享的单例对象状态的丢失。

9. 适用场景
    - 系统只需要一个实例对象
    - 客户调用类的单个实例只允许一个公共访问点
